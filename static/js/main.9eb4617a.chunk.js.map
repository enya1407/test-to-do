{"version":3,"sources":["components/ToDoWrapper/ToDoWrapper.module.css","components/DataTable/DataTable.module.css","utils/createRootReducer.ts","store/actions.ts","store/reducers.ts","store/setector.ts","utils/getUpdatedPriorities.ts","store/firebase.ts","store/store.ts","components/DataTable/DroppableBodyRender.tsx","components/DataTable/DraggableRowRender.tsx","components/DataTable/DataTable.tsx","components/ToDoWrapper/ToDoWraper.tsx","App.tsx","index.tsx"],"names":["module","exports","initialState","changeLoadingAction","isLoading","type","payload","fetchDataAction","dataFetchedAction","todos","addDataAction","todo","deleteDataAction","id","editDataAction","editPriorityAction","draggableId","leftId","rightId","getType","creator","createMap","actions","reducer","prevMap","reduce","acc","action","hasOwnProperty","push","rootReducer","reducerMap","map","state","nextState","loadingSelector","todosSelector","getUpdatedPriorities","todosWithoutDragged","filter","leftIndex","findIndex","el","slicedCount","beforeArray","slice","afterArray","length","draggedEl","find","index","priority","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","getTodos","a","todosCol","collection","q","query","orderBy","getDocs","todosSnapshot","docs","doc","data","deleteTodo","where","deleteDoc","ref","addTodo","newToDo","addDoc","editTodo","setDoc","editTodos","newToDos","newDoc","isDeleteAction","isAddAction","isEditAction","isEditPriorityAction","store","createStore","composeWithDevTools","applyMiddleware","thunk","dispatch","getState","next","message","error","console","log","deleteId","modifiedToDo","newTodos","DroppableBodyRender","onDragEnd","props","droppableId","provided","innerRef","droppableProps","children","placeholder","displayName","DragHandleContext","createContext","DraggableRowRender","rowData","currentRow","row","indexOf","Number","snapshot","draggableProps","Provider","value","dragHandleProps","PriorityRenderer","useContext","justify","style","margin","DataTable","useSelector","inputRef","useRef","useDispatch","useState","edit","setEdit","useEffect","current","focus","saveHandler","cancelHandler","columns","title","dataIndex","width","className","render","_","record","checked","onChange","checkedHandler","e","target","textDecoration","onClick","disabled","editHandler","loading","dataSource","table","pagination","rowKey","components","body","wrapper","destination","source","destinationIndex","sourceIndex","rightIndex","undefined","ToDoWrapper","Form","useForm","form","submitHandler","validateFields","getFieldValue","uuidV4","resetFields","onFinish","Item","name","input","rules","required","validator","trim","Promise","resolve","reject","Error","App","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9eb4617a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"logoWrapper\":\"ToDoWrapper_logoWrapper__18BZ5\",\"wrapper\":\"ToDoWrapper_wrapper__1rGMm\",\"form\":\"ToDoWrapper_form__2RfZh\",\"input\":\"ToDoWrapper_input__OZvEY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"DataTable_table__jPvtb\"};","// @ts-nocheck\r\n/* eslint-disable */\r\nimport {ActionCreator, AnyAction, Reducer} from 'redux';\r\n\r\nexport const getType = (creator: ActionCreator<AnyAction>) => creator().type;\r\n\r\nexport const createRootReducer = (initialState) => <S>(reducerMap): Reducer<S> => {\r\n  const map = reducerMap.reduce((acc, [reducer, ...actions]) => createMap(actions, reducer, acc), {});\r\n\r\n  return (state = initialState, action) => (map.hasOwnProperty(action.type)\r\n    ? map[action.type].reduce((nextState, reducer) => reducer(nextState, action), state)\r\n    : state);\r\n};\r\n\r\nconst createMap = (actions, reducer, prevMap) => actions.reduce((acc, action) => {\r\n  const type = getType(action);\r\n\r\n  if (!acc.hasOwnProperty(type)) {\r\n    acc[type] = [];\r\n  }\r\n\r\n  acc[type].push(reducer);\r\n\r\n  return acc;\r\n}, prevMap);","import { ITodo } from \"../types/types\";\n\nexport const changeLoadingAction = (isLoading: boolean) => ({\n  type: \"CHANGE_LOADING\",\n  payload: { isLoading },\n});\nexport const fetchDataAction = () => ({\n  type: \"FETCH_DATA\",\n});\nexport const dataFetchedAction = (todos: ITodo[]) => ({\n  type: \"DATA_FETCHED\",\n  payload: { todos },\n});\nexport const addDataAction = (todo: ITodo) => ({\n  type: \"ADD_DATA\",\n  payload: { todo },\n});\nexport const deleteDataAction = (id: string) => ({\n  type: \"DELETE_DATA\",\n  payload: { id },\n});\nexport const editDataAction = (todo: ITodo) => ({\n  type: \"EDIT_DATA\",\n  payload: { todo },\n});\nexport const editPriorityAction = (\n  draggableId: string,\n  leftId?: string,\n  rightId?: string\n) => ({\n  type: \"EDIT_PROPERTY\",\n  payload: { draggableId, leftId, rightId },\n});\n","import { IState } from \"../types/types\";\nimport {\n  addDataAction,\n  changeLoadingAction,\n  dataFetchedAction,\n  deleteDataAction,\n  editDataAction,\n  editPriorityAction,\n  fetchDataAction,\n} from \"./actions\";\nimport { createRootReducer } from \"../utils/createRootReducer\";\nimport { v4 as uuidV4 } from \"uuid\";\n\nconst initialState: IState = {\n  isLoading: true,\n  todos: [],\n};\n\nconst changeLoadingReducer = (\n  state: IState,\n  action: ReturnType<typeof changeLoadingAction>\n): IState => ({\n  ...state,\n  isLoading: action.payload.isLoading,\n});\n\nconst editPriorityReducer = (state: IState): IState => ({\n  ...state,\n  isLoading: true,\n});\n\nconst fetchDataReducer = (state: IState): IState => ({\n  ...state,\n  isLoading: true,\n});\n\nconst dataFetchedReducer = (\n  state: IState,\n  action: ReturnType<typeof dataFetchedAction>\n): IState => ({\n  ...state,\n  todos: action.payload.todos,\n  isLoading: false,\n});\n\nexport const rootReducer = createRootReducer(initialState)([\n  [changeLoadingReducer, changeLoadingAction],\n  [fetchDataReducer, fetchDataAction],\n  [dataFetchedReducer, dataFetchedAction],\n  [editPriorityReducer, editPriorityAction],\n]);\n","import { IState } from \"../types/types\";\r\n\r\nexport const loadingSelector = (state: IState) => state.isLoading;\r\nexport const todosSelector = (state: IState) => state.todos;\r\n","import { ITodo } from \"../types/types\";\nimport { editPriorityAction } from \"../store/actions\";\n\nconst getUpdatedPriorities = (\n  todos: ITodo[],\n  payload: ReturnType<typeof editPriorityAction>[\"payload\"]\n) => {\n  const todosWithoutDragged = todos.filter(\n    ({ id }) => id !== payload.draggableId\n  );\n\n  const leftIndex = todos.findIndex((el) => el.id === payload.leftId);\n\n  const draggedIndex = todos.findIndex((el) => el.id === payload.draggableId);\n\n  const isMoveRight = draggedIndex > leftIndex;\n\n  const slicedCount = isMoveRight ? leftIndex + 1 : leftIndex;\n\n  const beforeArray = payload.leftId\n    ? todosWithoutDragged.slice(0, slicedCount)\n    : [];\n\n  const afterArray = payload.rightId\n    ? todosWithoutDragged.slice(slicedCount, todos.length)\n    : [];\n\n  const draggedEl = todos.find((el) => el.id === payload.draggableId) as ITodo;\n\n  return [...beforeArray, draggedEl, ...afterArray].map((el, index) => {\n    return { ...el, priority: todos.length - index };\n  });\n};\nexport default getUpdatedPriorities;\n","import { initializeApp } from \"firebase/app\";\nimport {\n  collection,\n  doc,\n  getDocs,\n  getFirestore,\n  orderBy,\n  query,\n  where,\n} from \"firebase/firestore\";\nimport {\n  addDataAction,\n  changeLoadingAction,\n  dataFetchedAction,\n  deleteDataAction,\n  editDataAction,\n  editPriorityAction,\n  fetchDataAction,\n} from \"./actions\";\nimport { ITodo } from \"../types/types\";\nimport {\n  deleteDoc,\n  addDoc,\n  setDoc,\n  getDoc,\n  QueryDocumentSnapshot,\n} from \"@firebase/firestore\";\nimport { AnyAction, Dispatch, Middleware } from \"redux\";\nimport { message } from \"antd\";\nimport { getType } from \"../utils/createRootReducer\";\nimport { todosSelector } from \"./setector\";\nimport getUpdatedPriorities from \"../utils/getUpdatedPriorities\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCzze7ompdDAQI0RQSQaEopDB8itPqtn0o\",\n  authDomain: \"to-do-list-e2ca9.firebaseapp.com\",\n  databaseURL:\n    \"https://to-do-list-e2ca9-default-rtdb.europe-west1.firebasedatabase.app\",\n  projectId: \"to-do-list-e2ca9\",\n  storageBucket: \"to-do-list-e2ca9.appspot.com\",\n  messagingSenderId: \"205229194553\",\n  appId: \"1:205229194553:web:1d12427b028b2b285e3ce8\",\n  measurementId: \"G-MQ3KTWJHV1\",\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\nasync function getTodos() {\n  const todosCol = collection(db, \"todos\");\n  const q = query(todosCol, orderBy(\"priority\", \"desc\"));\n  const todosSnapshot = await getDocs(q);\n\n  return todosSnapshot.docs.map<ITodo>((doc: QueryDocumentSnapshot<any>) =>\n    doc.data()\n  );\n}\n\nasync function deleteTodo(id: string) {\n  const todosCol = collection(db, \"todos\");\n  const q = query(todosCol, where(\"id\", \"==\", id));\n  const todos = await getDocs(q);\n\n  for (const doc of todos.docs) {\n    await deleteDoc(doc.ref);\n  }\n}\n\nasync function addTodo(newToDo: ITodo) {\n  const todosCol = collection(db, \"todos\");\n  await addDoc(todosCol, newToDo);\n}\n\nasync function editTodo(newToDo: ITodo) {\n  const todosCol = collection(db, \"todos\");\n  const q = query(todosCol, where(\"id\", \"==\", newToDo.id));\n  const todos = await getDocs(q);\n\n  for (const doc of todos.docs) {\n    await setDoc(doc.ref, newToDo);\n  }\n}\n\nasync function editTodos(newToDos: ITodo[]) {\n  const todosCol = collection(db, \"todos\");\n  const todos = await getDocs(todosCol);\n\n  for (const doc of todos.docs) {\n    const newDoc = newToDos.find(({ id }) => id === doc.data().id);\n    await setDoc(doc.ref, newDoc);\n  }\n}\n\nconst isDeleteAction = (\n  action: AnyAction\n): action is ReturnType<typeof deleteDataAction> => {\n  return action.type === getType(deleteDataAction);\n};\nconst isAddAction = (\n  action: AnyAction\n): action is ReturnType<typeof addDataAction> => {\n  return action.type === getType(addDataAction);\n};\nconst isEditAction = (\n  action: AnyAction\n): action is ReturnType<typeof editDataAction> => {\n  return action.type === getType(editDataAction);\n};\nconst isEditPriorityAction = (\n  action: AnyAction\n): action is ReturnType<typeof editPriorityAction> => {\n  return action.type === getType(editPriorityAction);\n};\n\nexport const todosMiddleware: Middleware = ({ dispatch, getState }) => {\n  return function (next) {\n    return async function (action: AnyAction) {\n      if (action.type === getType(fetchDataAction)) {\n        try {\n          const todos = await getTodos();\n\n          return dispatch(dataFetchedAction(todos));\n        } catch (error) {\n          void message.error(\"loading error\");\n\n          console.log(\"Error\", error);\n\n          return dispatch(changeLoadingAction(false));\n        }\n      }\n      if (isDeleteAction(action)) {\n        try {\n          const deleteId = action.payload.id;\n          await deleteTodo(deleteId);\n\n          const todos = await getTodos();\n\n          return dispatch(dataFetchedAction(todos));\n        } catch (error) {\n          void message.error(\"loading error\");\n\n          console.log(\"Error\", error);\n\n          return dispatch(changeLoadingAction(false));\n        }\n      }\n      if (isAddAction(action)) {\n        try {\n          const newToDo = action.payload.todo;\n          await addTodo(newToDo);\n\n          const todos = await getTodos();\n\n          return dispatch(dataFetchedAction(todos));\n        } catch (error) {\n          void message.error(\"loading error\");\n\n          console.log(\"Error\", error);\n\n          return dispatch(changeLoadingAction(false));\n        }\n      }\n      if (isEditAction(action)) {\n        try {\n          const modifiedToDo = action.payload.todo;\n          await editTodo(modifiedToDo);\n\n          const todos = await getTodos();\n\n          return dispatch(dataFetchedAction(todos));\n        } catch (error) {\n          void message.error(\"loading error\");\n\n          console.log(\"Error\", error);\n\n          return dispatch(changeLoadingAction(false));\n        }\n      }\n      if (isEditPriorityAction(action)) {\n        const state = getState();\n        const todos = todosSelector(state);\n\n        const newTodos = getUpdatedPriorities(todos, action.payload);\n        try {\n          await editTodos(newTodos);\n\n          const todos = await getTodos();\n\n          return dispatch(dataFetchedAction(todos));\n        } catch (error) {\n          void message.error(\"loading error\");\n\n          console.log(\"Error\", error);\n\n          return dispatch(changeLoadingAction(false));\n        }\n      }\n\n      return next(action);\n    };\n  };\n};\n","import { applyMiddleware, createStore } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\nimport { rootReducer } from \"./reducers\";\r\nimport {todosMiddleware} from \"./firebase\";\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(thunk, todosMiddleware))\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\n\ninterface IDragItem {\n  droppableId: string;\n  index: number;\n}\n\ninterface IDragEndInfo {\n  draggableId: string;\n  destination: IDragItem;\n  source: IDragItem;\n}\n\nexport type TOnDragEnd = (info: IDragEndInfo) => void;\n\nexport const DroppableBodyRender = (onDragEnd: TOnDragEnd) => (props: any) =>\n  (\n    <DragDropContext onDragEnd={onDragEnd} {...props}>\n      <Droppable droppableId={\"list\"}>\n        {(provided: any) => (\n          <tbody ref={provided.innerRef} {...provided.droppableProps}>\n            {props.children}\n\n            {provided.placeholder}\n          </tbody>\n        )}\n      </Droppable>\n    </DragDropContext>\n  );\nDroppableBodyRender.displayName = \"DroppableBodyRender\";\n","import React, { createContext } from \"react\";\nimport {\n  Draggable,\n  DraggableProvidedDragHandleProps,\n} from \"react-beautiful-dnd\";\nimport { ITodo } from \"../../types/types\";\n\nconst DragHandleContext =\n  createContext<DraggableProvidedDragHandleProps | null>(null);\n\nconst DraggableRowRender = (rowData: ITodo[]) => (props: any) => {\n  const currentRow = rowData.find((row) => row.id === props[\"data-row-key\"]);\n\n  if (!currentRow) {\n    return <tr>{props.children}</tr>;\n  }\n\n  const index = rowData.indexOf(currentRow);\n\n  return (\n    <Draggable\n      draggableId={currentRow.id}\n      index={Number(index)}\n      // className={classes.draggable} // todo check\n    >\n      {(provided, snapshot) => (\n        <tr\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          id={currentRow.id}\n        >\n          <DragHandleContext.Provider value={provided.dragHandleProps ?? null}>\n            {props.children}\n          </DragHandleContext.Provider>\n        </tr>\n      )}\n    </Draggable>\n  );\n};\nDraggableRowRender.displayName = \"DraggableRowRender\";\n\nexport { DragHandleContext, DraggableRowRender };\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { loadingSelector, todosSelector } from \"../../store/setector\";\nimport { Button, Checkbox, Input, Row, Table } from \"antd\";\nimport { ITodo } from \"../../types/types\";\nimport style from \"./DataTable.module.css\";\nimport {\n  changeLoadingAction,\n  deleteDataAction,\n  editDataAction,\n  editPriorityAction,\n} from \"../../store/actions\";\nimport { DroppableBodyRender, TOnDragEnd } from \"./DroppableBodyRender\";\nimport { DraggableRowRender, DragHandleContext } from \"./DraggableRowRender\";\n\nconst PriorityRenderer = () => {\n  const dragHandleProps = useContext(DragHandleContext);\n\n  return (\n    <Row justify={\"center\"}>\n      <div {...dragHandleProps} style={{ margin: \"0 6px\" }}>\n        :::\n      </div>\n    </Row>\n  );\n};\n\nconst DataTable = () => {\n  const todos = useSelector(todosSelector);\n  const isLoading = useSelector(loadingSelector);\n\n  const inputRef = useRef<Input>(null);\n\n  const dispatch = useDispatch();\n\n  const [edit, setEdit] = useState<ITodo | null>(null);\n\n  useEffect(() => {\n    if (edit) {\n      inputRef.current?.focus();\n    }\n  }, [edit]);\n\n  const saveHandler = () => {\n    dispatch(changeLoadingAction(true));\n    dispatch(editDataAction(edit as ITodo));\n    setEdit(null);\n  };\n\n  const cancelHandler = () => {\n    setEdit(null);\n  };\n  const editHandler = (record: ITodo) => {\n    setEdit(record);\n  };\n  const deleteHandler = (id: string) => {\n    dispatch(changeLoadingAction(true));\n    dispatch(deleteDataAction(id));\n  };\n\n  const checkedHandler = (record: ITodo) => {\n    dispatch(changeLoadingAction(true));\n    if (edit && record.id === edit.id) {\n      setEdit(null);\n    }\n    dispatch(\n      editDataAction({\n        id: record.id,\n        value: record.value,\n        checked: !record.checked,\n        priority: record.priority,\n      })\n    );\n  };\n\n  const onDragEnd: TOnDragEnd = ({ draggableId, destination, source }) => {\n    const destinationIndex = destination?.index;\n    const sourceIndex = source?.index;\n\n    if (\n      typeof destinationIndex !== \"number\" ||\n      destinationIndex === sourceIndex\n    ) {\n      return;\n    }\n\n    let leftIndex: number | undefined;\n    let rightIndex: number | undefined;\n\n    if (destinationIndex > sourceIndex) {\n      leftIndex = destinationIndex === 0 ? undefined : destinationIndex;\n      rightIndex =\n        destinationIndex === todos.length - 1\n          ? undefined\n          : Number(destinationIndex) + 1;\n    } else {\n      leftIndex = destinationIndex === 0 ? undefined : destinationIndex - 1;\n      rightIndex =\n        destinationIndex === todos.length - 1 ? undefined : destinationIndex;\n    }\n\n    const leftId = leftIndex !== undefined ? todos[leftIndex].id : undefined;\n    const rightId = rightIndex !== undefined ? todos[rightIndex].id : undefined;\n    dispatch(changeLoadingAction(true));\n    dispatch(editPriorityAction(draggableId, leftId, rightId));\n  };\n\n  const columns = [\n    {\n      title: \"\",\n      dataIndex: \"priority\",\n      width: 20,\n      className: \"dragVisible\",\n      render: PriorityRenderer,\n    },\n\n    {\n      title: \"checked\",\n      dataIndex: \"checked\",\n      width: 50,\n      render: (_: boolean, record: ITodo) => (\n        <Checkbox\n          checked={record.checked}\n          onChange={() => checkedHandler(record)}\n        />\n      ),\n    },\n    {\n      title: \"value\",\n      dataIndex: \"value\",\n      render: (_: string, record: ITodo) =>\n        edit && edit.id === record.id ? (\n          <Input\n            ref={inputRef}\n            value={edit.value}\n            onChange={(e) => setEdit({ ...edit, value: e.target.value })}\n          />\n        ) : (\n          <span\n            style={{ textDecoration: record.checked ? \"line-through\" : \"none\" }}\n          >\n            {record.value}\n          </span>\n        ),\n    },\n    {\n      title: \"action\",\n      dataIndex: \"action\",\n      width: 170,\n      render: (_: undefined, record: ITodo) =>\n        edit && edit.id === record.id ? (\n          <>\n            <Button onClick={saveHandler}>Save</Button>{\" \"}\n            <Button onClick={cancelHandler}>cancel</Button>\n          </>\n        ) : (\n          <>\n            <Button\n              disabled={record.checked}\n              onClick={() => editHandler(record)}\n            >\n              Edit\n            </Button>{\" \"}\n            <Button\n              disabled={record.checked}\n              onClick={() => deleteHandler(record.id)}\n            >\n              Delete\n            </Button>\n          </>\n        ),\n    },\n  ];\n\n  return (\n    <Table\n      columns={columns}\n      loading={isLoading}\n      dataSource={todos}\n      className={style.table}\n      pagination={false}\n      rowKey={({ id }) => id}\n      components={{\n        body: {\n          wrapper: DroppableBodyRender(onDragEnd),\n          row: DraggableRowRender(todos),\n        },\n      }}\n    />\n  );\n};\nexport default DataTable;\n","import React from \"react\";\nimport style from \"./ToDoWrapper.module.css\";\nimport { loadingSelector, todosSelector } from \"../../store/setector\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button, Form, Input, Row, Spin } from \"antd\";\nimport DataTable from \"../DataTable/DataTable\";\nimport { v4 as uuidV4 } from \"uuid\";\nimport { addDataAction, changeLoadingAction } from \"../../store/actions\";\n\nconst ToDoWrapper = () => {\n  const [form] = Form.useForm();\n\n  const todos = useSelector(todosSelector);\n\n  const dispatch = useDispatch();\n\n  const submitHandler = async () => {\n    try {\n      dispatch(changeLoadingAction(true));\n      await form.validateFields();\n      const newToDo = form.getFieldValue([\"input\"]);\n\n      dispatch(\n        addDataAction({\n          id: uuidV4(),\n          value: newToDo,\n          checked: false,\n          priority: todos.length > 0 ? todos[0].priority + 1 : 1,\n        })\n      );\n      form.resetFields([\"input\"]);\n    } catch (errorInfo) {\n      console.log(\"errorInfo:\", errorInfo);\n    }\n  };\n  return (\n    <div className={style.wrapper}>\n      <Form form={form} className={style.form} onFinish={() => submitHandler()}>\n        <Row justify={\"space-between\"}>\n          {\" \"}\n          <Form.Item\n            name={\"input\"}\n            className={style.input}\n            rules={[\n              {\n                required: true,\n                validator: (rules, value) => {\n                  if (!value.trim()) {\n                    return Promise.reject(new Error(\"Please input item\"));\n                  } else {\n                    return Promise.resolve();\n                  }\n                },\n              },\n            ]}\n          >\n            <Input placeholder=\"input new item\" />\n          </Form.Item>\n          <Form.Item>\n            <Button type={\"primary\"} onClick={submitHandler}>\n              Add\n            </Button>\n          </Form.Item>\n        </Row>\n      </Form>\n\n      <DataTable />\n    </div>\n  );\n};\n\nexport default ToDoWrapper;\n","import React, { useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport ToDoWrapper from \"./components/ToDoWrapper/ToDoWraper\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport \"antd/dist/antd.css\";\r\nimport {changeLoadingAction, fetchDataAction} from \"./store/actions\";\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(changeLoadingAction(true))\r\n    dispatch(fetchDataAction());\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <ToDoWrapper />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store/store\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}